unset MAILCHECK
export IRC_CLIENT='irssi'
export TODO="t"

# Load Bash-it logic
if [ -f "${BASH_IT}/bash_it.sh" ]; then
    source "${BASH_IT}/bash_it.sh"
fi

# --- 4. CUSTOM PROMPT SETUP ---
# Remove any conflicting prompt engines
unset PROMPT_COMMAND

# Function to safely display git branch
parse_git_branch() {
    local branch
    # The space before 2>/dev/null is critical to avoid "fatal" errors
    branch=$(git rev-parse --abbrev-ref HEAD 2>/dev/null)
    if [[ -n "$branch" ]]; then
        echo " ($branch)"
    fi
}

# The Layout: |saad|fedora| ~/Programs (branch) →
# Note: the \$ ensures the function runs every time you run a command
export PS1="|\[\e[1;34m\]\u\[\e[0m\]|\[\e[1;32m\]\h\[\e[0m\]| \[\e[1;33m\]\w\[\e[1;36m\]\$(parse_git_branch)\n\[\e[1;34m\]══❯ \[\e[0m\]"

# Show fastfetch on terminal start
if command -v fastfetch >/dev/null 2>&1; then
    fastfetch
fi
alias kate-update='sudo dnf5 update kate'
alias 0='cd ~'
alias 1='cd Programs/'
alias bashrc='vim ~/.bashrc'
alias desktop-files='cd ~/.local/share/applications'
alias bashrc-update='source ~/.bashrc'
alias git-update='git add . && git commit -m "Auto-update $(date +"%Y-%m-%d %H:%M:%S")" 2>/dev/null || echo "Nothing to commit" && git pull --rebase && git push'
alias files-desktop-files='nautilus ~/.local/share/applications'
alias refresh='nautilus -q && (nautilus &>/dev/null & disown)'
alias desktop-refresh='update-desktop-database ~/.local/share/applications/'
alias hide-brave='cat <<EOF > ~/.local/share/applications/brave-browser.desktop
[Desktop Entry]
Type=Application
Name=Brave Web Browser
Exec=/usr/bin/brave-browser-stable %U
Icon=brave-browser
NoDisplay=true
EOF
update-desktop-database ~/.local/share/applications/'
